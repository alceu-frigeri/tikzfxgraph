% !TEX program = pdflatex
% !TEX ext =  --interaction=nonstopmode --enable-etex --enable-write18
% !BIB program = none
%%%==============================================================================
%% Copyright 2025-present by Alceu Frigeri
%%
%% This work may be distributed and/or modified under the conditions of
%%
%% * The [LaTeX Project Public License](http://www.latex-project.org/lppl.txt),
%%   version 1.3c (or later), and/or
%% * The [GNU Affero General Public License](https://www.gnu.org/licenses/agpl-3.0.html),
%%   version 3 (or later)
%%
%% This work has the LPPL maintenance status *maintained*.
%%
%% The Current Maintainer of this work is Alceu Frigeri
%%
%% This is version {0.0} {2027/13/33}
%%
%% The list of files that compose this work can be found in the README.md file at
%% https://ctan.org/pkg/tikzfxgraph
%%
%%%==============================================================================
\documentclass[10pt]{article}

\begin{document}
\ExplSyntaxOn
\keys_define:nn {my module / mod A}
  {  
    A key .usage:n = general ,
    A key .code:n = {(A~ key:#1:)~} ,   
    unknown .code:n = 
      { (unknown~ mod~ A:\l_keys_key_str\ ~with:~ \l_keys_value_tl\ ~ path:~ \l_keys_path_str) } ,
  }

\keys_define:nn {} 
  {
    my module / mod B .inherit:n = 
      { my module / mod A }
  }

\keys_define:nn {my module / mod B}
  {  
    B key .usage:n = general ,
    B key .code:n = {(B~ key:#1:)~} ,
%    unknown .code:n = 
%      { (unknown~ mod~ B:\l_keys_key_str\ ~with:~ \l_keys_value_tl\ ~ path:~ \l_keys_path_str) } ,
  }
  
\keys_define:nn {} 
  {
    my module / mod C .inherit:n = 
      { my module / mod B }
  }

\keys_define:nn {my module / mod C}
  {  
    C key .usage:n = general ,
    C key .code:n = {(C~ key:#1:)~} ,
%    unknown .code:n = 
%      { (unknown~ mod~ C:\l_keys_key_str\ ~with:~ \l_keys_value_tl\ ~ path:~ \l_keys_path_str) } ,
  }
  
\keys_define:nn {} 
  {
    my module / mod D .inherit:n = 
      { my module / mod C }
  }

\keys_define:nn {my module / mod D}
  {  
    D key .usage:n = general ,
    D key .code:n = {(D~ key:#1:)~} ,
%    unknown .code:n = 
%      { (unknown~ mod~ D:\l_keys_key_str\ ~with:~ \l_keys_value_tl\ ~ path:~ \l_keys_path_str) } ,
  }
  

X~ of~ A:  
\keys_set:nn { my module / mod A}  {X key=X}\par
A~ of~ A:  
\keys_set:nn { my module / mod A}  {A key=X}\par
A~ of~ B:  
\keys_set:nn { my module / mod B}  {A key=Y}\par
A~ of~ C:  
\keys_set:nn { my module / mod C}  {A key=Z}\par
A~ of~ D:  
\keys_set:nn { my module / mod D}  {A key=W}\par


B~ of~ B:  
\keys_set:nn { my module / mod B}  {B key=Y}\par
%
%% This gives an error, missing key...
B~ of~ C:  
\keys_set:nn { my module / mod C}  {B key=Z}\par
%
%% This gives an error, missing key...
B~ of~ D:  
\keys_set:nn { my module / mod D}  {B key=W}\par


C~ of~ C:  
\keys_set:nn { my module / mod C}  {C key=Z}\par
%
%% This gives an error, missing key...
C~ of~ D:  
\keys_set:nn { my module / mod D}  {C key=W}\par

D~ of~ D:  
\keys_set:nn { my module / mod D}  {D key=W}\par


\ExplSyntaxOff
\end{document} 